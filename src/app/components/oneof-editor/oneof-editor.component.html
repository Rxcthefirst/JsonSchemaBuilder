<div class="oneof-editor" *ngIf="oneOfVariants.length > 0">
  <div class="oneof-header">
    <h4>OneOf Variants</h4>
    <div class="discriminator-info">{{ getDiscriminatorInfo() }}</div>
  </div>

  <!-- Variant Tabs -->
  <div class="variant-tabs">
    <button 
      *ngFor="let variant of oneOfVariants" 
      type="button"
      class="variant-tab"
      [class.active]="variant.id === activeVariantId"
      (click)="selectVariant(variant.id)"
      title="{{ variant.description || 'Schema variant' }}">
      <span class="variant-title">{{ variant.title }}</span>
      <button 
        type="button" 
        class="remove-variant"
        *ngIf="oneOfVariants.length > 1"
        (click)="removeVariant(variant.id); $event.stopPropagation()"
        title="Remove variant">
        Ã—
      </button>
    </button>
    
    <button 
      type="button" 
      class="add-variant-btn"
      (click)="toggleAddVariant()"
      title="Add new variant">
      + Add Variant
    </button>
  </div>

  <!-- Active Variant Editor -->
  <div class="variant-editor" *ngIf="activeVariant">
    <!-- Variant Metadata -->
    <div class="variant-metadata">
      <div class="metadata-row">
        <div class="metadata-field">
          <label>Variant Title:</label>
          <input 
            type="text" 
            [value]="activeVariant.title"
            (input)="updateVariantTitle(activeVariant.id, $any($event.target).value)"
            placeholder="Variant name">
        </div>
        <div class="metadata-field">
          <label>Description:</label>
          <input 
            type="text" 
            [value]="activeVariant.description || ''"
            (input)="updateVariantDescription(activeVariant.id, $any($event.target).value)"
            placeholder="Variant description">
        </div>
      </div>
    </div>

    <!-- Schema Editor for Active Variant -->
    <div class="variant-schema">
      <div class="basic-schema-editor">
        <div class="field-group">
          <label>Type:</label>
          <select [(ngModel)]="activeVariant.schema.type" (change)="onVariantSchemaChange(activeVariant.schema)">
            <option [value]="PropertyType.STRING">String</option>
            <option [value]="PropertyType.NUMBER">Number</option>
            <option [value]="PropertyType.INTEGER">Integer</option>
            <option [value]="PropertyType.BOOLEAN">Boolean</option>
            <option [value]="PropertyType.OBJECT">Object</option>
            <option [value]="PropertyType.ARRAY">Array</option>
          </select>
        </div>
        
        <div class="field-group">
          <label>Description:</label>
          <input 
            type="text" 
            [(ngModel)]="activeVariant.schema.description"
            (input)="onVariantSchemaChange(activeVariant.schema)"
            placeholder="Describe this variant">
        </div>
        
        <div class="field-group" *ngIf="activeVariant.schema.type === PropertyType.STRING">
          <label>Pattern:</label>
          <input 
            type="text" 
            [(ngModel)]="activeVariant.schema.pattern"
            (input)="onVariantSchemaChange(activeVariant.schema)"
            placeholder="Optional regex pattern">
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add Variant Form -->
<div class="add-variant-form" *ngIf="showAddVariant">
  <h5>Add New Variant</h5>
  <p>This will create a new schema variant in the oneOf array.</p>
  <div class="form-actions">
    <button type="button" class="btn btn-primary" (click)="addVariant()">
      Create Variant
    </button>
    <button type="button" class="btn btn-secondary" (click)="toggleAddVariant()">
      Cancel
    </button>
  </div>
</div>

<!-- Empty State -->
<div class="empty-state" *ngIf="oneOfVariants.length === 0">
  <p>No oneOf variants defined.</p>
  <button type="button" class="btn btn-primary" (click)="addVariant()">
    Add First Variant
  </button>
</div>
{
"$schema": "https://json-schema.org/draft/2020-12/schema",
"$id": "https://example.com/payment-method.schema.json",
"title": "PaymentMethod",
"type": "object",
"properties": {
"type": {"enum": ["card", "ach", "paypal"]},
"label": {"type": "string"}
},
"required": ["type"],
"oneOf": [
{
"$comment": "Credit/debit card variant",
"properties": {
"type": {"const": "card"},
"brand": {"enum": ["visa", "mc", "amex", "discover"]},
"last4": {"type": "string", "pattern": "^\\d{4}$"},
"exp": {"type": "string", "pattern": "^(0[1-9]|1[0-2])\\/(\\d{2})$"}
},
"required": ["brand", "last4", "exp"],
"unevaluatedProperties": false
},
{
"$comment": "Bank account (ACH) variant",
"properties": {
"type": {"const": "ach"},
"bankName": {"type": "string"},
"routing": {"type": "string", "pattern": "^\\d{9}$"},
"account": {"type": "string", "minLength": 4}
},
"required": ["bankName", "routing", "account"],
"unevaluatedProperties": false
},
{
"$comment": "PayPal variant",
"properties": {
"type": {"const": "paypal"},
"email": {"type": "string", "format": "email"}
},
"required": ["email"],
"unevaluatedProperties": false
}
]
}